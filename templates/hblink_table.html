<h3>HBlink Status Tables:</h3>
<h4>Master Systems</h4>
<table style="width:100%; font: 10pt arial, sans-serif">
    <colgroup>
        <col style="width: 10%" />
        <col style="width: 20%" />
        <col style="width: 8%" />
        <col style="width: 4%" />
        <col style="width: 3%" />
        <col style="width: 10%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
    </colgroup>
    <tr style="width:100%; font: 10pt arial, sans-serif; background-color:#666666; color:white">
        <th>HBP System</th>
        <th>ID/Callsign/Location<br>IP:Port/KeepAlives</th>
        <th>Frequency</th>
        <th>ColorCode<br>LinkedTS</th>
        <th>Slot</th>
        <th>Call<br>Type</th>
        <th>Source<br>Subscriber</th>
        <th>Source<br>Peer</th>
        <th>Destination</th>
    </tr>

    {% for _master in _table['MASTERS'] %}    

    <tr>
        <td style="font-weight:bold" rowspan="{{ (_table['MASTERS'][_master]['PEERS']|length * 2) +1 }}"> {{ _master}} </td>
    </tr>
    {% for _client, _cdata in _table['MASTERS'][_master]['PEERS'].iteritems() %}
    <tr>
        <td rowspan="2">{{ _client }}, {{ _cdata['CALLSIGN'] }}, {{ _cdata['LOCATION'] }}<br><div style="font: 8pt arial, sans-serif">{{ _cdata['IP'] }}:{{ _cdata['PORT'] }} / {{ _cdata['PINGS_RECEIVED'] }}</div></td>
        <td rowspan="2">TX: {{ _cdata['RX_FREQ'] }}<br>RX: {{ _cdata['TX_FREQ'] }}</td>
        <td rowspan="2">{{ _cdata['COLORCODE'] }}<br>{{ _cdata['SLOTS'] }}</td>

        <td>TS1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <tr>
        <td>TS2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        </tr>

    </tr>    
    {% endfor %}
{% endfor %}
</table>

<h4>Client Systems</h4>
<table style="width:100%; font: 10pt arial, sans-serif">
    <colgroup>
        <col style="width: 20%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
        <col style="width: 10%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
        <col style="width: 10%" />
    </colgroup>
    <tr style="width:100%; font: 10pt arial, sans-serif; background-color:#666666; color:white">
        <th>HBP System</th>
        <th>Client Radio ID</th>
        <th>Callsign</th>
        <th>Connection</th>
        <th>Ping Sent</th>
        <th>Ping Ack</th>
        <th>Master</th>
    </tr>
    
    {% for _client in _table['PEERS'] %}
    
    <tr>
        <td style="font-weight:bold"> {{ _client}} </td>
        <td>{{ _table['PEERS'][_client]['RADIO_ID'] }}</td>
        <td>{{ _table['PEERS'][_client]['CALLSIGN'] }}</td>
        <td style={{ 'background-color:#00ff00' if _table['PEERS'][_client]['STATS']['CONNECTION'] == 'YES' else ';background-color:#ff0000' }}>{{ _table['PEERS'][_client]['STATS']['CONNECTION'] }}</td>
        <td>{{ _table['PEERS'][_client]['STATS']['PINGS_SENT'] }}</td>
        <td>{{ _table['PEERS'][_client]['STATS']['PINGS_ACKD'] }}</td>
        <td>{{ _table['PEERS'][_client]['MASTER_IP'] }}</td>
    </tr>
    {% endfor %}
</table>

<h4>OpenBridge Systems</h4>
<table style="width:100%; font: 10pt arial, sans-serif">
    <colgroup>
        <col style="width: 20%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
        <col style="width: 10%" />
        <col style="width: 15%" />
        <col style="width: 15%" />
        <col style="width: 10%" />
    </colgroup>
    <tr style="width:100%; font: 10pt arial, sans-serif; background-color:#666666; color:white">
        <th>OpenBridge System</th>
        <th>Network ID</th>
        <th>Target IP</th>
        <th>Target Port</th>
        <th />
        <th />
        <th />
    </tr>

    {% for _openbridge in _table['OPENBRIDGES'] %}

    <tr>
        <td style="font-weight:bold"> {{ _openbridge}} </td>
        <td>{{ _table['OPENBRIDGES'][_openbridge]['NETWORK_ID'] }}</td>
        <td>{{ _table['OPENBRIDGES'][_openbridge]['TARGET_IP'] }}</td>
        <td>{{ _table['OPENBRIDGES'][_openbridge]['TARGET_PORT'] }}</td>
        <th />
        <th />
        <th />
    </tr>
    {% endfor %}
</table>

